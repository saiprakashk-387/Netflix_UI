import axios from "axios";
import { LoginAction } from "../Redux/Slice";
import { APIService, base_Url } from "./apiConfig";
import { toast } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";
import { getAnalyticsAPI } from "./adminApi";

export const RegisterApi = (inputValues, navigate) => {
  axios
    .post(base_Url + "/register", inputValues)
    .then((res) => {
  console.log('ress',res);
      if (res.status === 200) {
        toast.success(res?.data?.message);
        navigate("/login");
      }
    })
    .catch((err) => {
      toast.error(err?.response?.data?.message);
    });
};

// relience-diIds
// dpIdfromExcel=[  
//   'COSS001',
//   'COST001',
//   'COSP001',
//   'DATS001',
//   'DATS002',
//   'DATP001',
//   'DATP002',
//   'DATP003',
//   'DATP004',
//   'PRQS001',
//   'PRQP001',
//   'PRQP004',
//   'PROP022',
//   'PRSP001',
//   'RESS002',
//   'RESS003',
//   'EMDS001',
//   'EMDS002',
//   'EMDP001',
//   'EMSS001',
//   'EMST001',
//   'EMSP001',
//   'EMSP002',
//   'EMSP003',
//   'EMSR014',
//   'HUMS001',
//   'HUMP005',
//   'HUMP009',
//   'AUDC001',
//   'AUDC002',
//   'AUDC003',
//   'AUDC004',
//   'AUDC005',
//   'AUDC006',
//   'BOCP001',
//   'BODC001',
//   'BOIS001',
//   'BOIC001',
//   'BOIP002',
//   'BOIP003',
//   'BOSS002',
//   'BOSC001',
//   'BOSC002',
//   'BOSC003',
//   'BOSC004',
//   'BOSC007',
//   'BOSP001',
//   'COMC001',
//   'COMC002',
//   'COMC003',
//   'COMC004',
//   'COMC005',
//   'COMC006',
//   'COMC007',
//   'COMC008',
//   'BUSS001',
//   'BUSS002',
//   'BUSS003',
//   'BUSS004',
//   'BUSC001',
//   'BUSC002',
//   'BUSC003',
//   'BUSP001',
//   'BUSP002',
//   'BUSP003',
//   'BUSP006',
//   'BUSP008',
//   'BUSP009',
//   'BUSP010',
//   'FINC001',
//   'FINP001',
//   'FINP002',
//   'MACS001',
//   'MACP003',
//   'MACP005',
//   'MACP010',
//   'MASP001',
//   'SHAS001',
//   'SHAS002',
//   'SHAC004',
//   'SHAC005',
//   'SHAC007',
//   'SHAC008',
//   'SHAC009',
//   'SHAC010',
//   'SHAC011',
//   'SHAC012',
//   'SHAP001',
//   'SHAP004',
//   'SHAP006', 
//   'SHAP007',
//   'BIOS001',
//   'BIOP001',
//   'BIOP002',
//   'BIOP004',
//   'AIRS001',
//   'AIRP001',
//   'GHGS001',
//   'GHGT001',
//   'GHGP001',
//   'GHGP002',
//   'GHGP003',
//   'GHGP005',
//   'GHGP010',
//   'WASS001',
//   'WASP001',
//   'WAPS001',
//   'ENES001',
//   'ENEP001',
//   'ENEP002',
//   'ENEP007',
//   'ENER009',
//   'ENVS001',
//   'ENVP001',
//   'ENVP002',
//   'ENVP003',
//   'ENVP006',
//   'ENVP007',
//   'ENVP008',
//   'ENVP009',
//   'GREP001',
//   'GREP002',
//   'GREP003',
//   'ESGP001',
//   'ESGP011',
//   'MATP001',
//   'WAES001',
//   'WAEP001',
//   'WAER005',
//   'ANTR001',
//   'AIRR001',
//   'AIRR003',
//   'AIRR007',
//   'AIRR009',
//   'GHGR001',
//   'WAPR001',
//   'ENER001',
//   'WAER001',
//   'COSR003',
//   'BOCR012',
//   'BOIR015',
//   'BOIR016',
//   'BOSR006',
//   'MACR011',
//   'MACR012',
//   'MACR022',
//   'MASR006',
//   'AUDR003',
//   'BODR002',
//   'BOIR002',
//   'BOIR004',
//   'BOIR006',
//   'BOIR008',
//   'BOIR012',
//   'BOIR014',
//   'BOSR003',
//   'BOSR005',
//   'BOSR008',
//   'COMR003',
//   'COMR006',
//   'MASR002',
//   'MASR005',
//   'FINR003' , 
// ],
// dpIdfromDB = [
//   'COSS001',
//   'COST001',
//   'COSP001',
//   'DATS001',
//   'DATS002',
//   'DATP001',
//   'DATP002',
//   'DATP003',
//   'DATP004',
//   'PRQS001',
//   'PRQP001',
//   'PRQP004',
//   'PROP022',
//   'PRSP001',
//   'RESS002',
//   'RESS003',
//   'EMDS001',
//   'EMDS002',
//   'EMDP001',
//   'EMSS001',
//   'EMST001',
//   'EMSP001',
//   'EMSP002',
//   'EMSP003',
//   'EMSR001',
//   'EMSR005',
//   'EMSR014',
//   'HUMS001',
//   'HUMP005',
//   'HUMP009',
//   'BIOS001',
//   'BIOP001',
//   'BIOP002',
//   'BIOP004',
//   'AIRS001',
//   'AIRP001',
//   'GHGS001',
//   'GHGT001',
//   'GHGP001',
//   'GHGP002',
//   'GHGP003',
//   'GHGP005',
//   'GHGP010',
//   'WASS001',
//   'WASP001',
//   'WAPS001',
//   'ENES001',
//   'ENEP001',
//   'ENEP002',
//   'ENEP007',
//   'ENVS001',
//   'ENVP001',
//   'ENVP002',
//   'ENVP003',
//   'ENVP006',
//   'ENVP007',
//   'ENVP008',
//   'ENVP009',
//   'GREP001',
//   'GREP002',
//   'GREP003',
//   'ESGP001',
//   'ESGP011',
//   'MATP001',
//   'WAES001',
//   'WAEP001',
//   'WAER005',
//   'AUDC001',
//   'AUDC002',
//   'AUDC003',
//   'AUDC004',
//   'AUDC005',
//   'AUDC006',
//   'BOCP001',
//   'BODC001',
//   'BOIS001',
//   'BOIC001',
//   'BOIP002',
//   'BOIP003',
//   'BOSS002',
//   'BOSC001',
//   'BOSC002',
//   'BOSC003',
//   'BOSC004',
//   'BOSC007',
//   'BOSP001',
//   'COMC001',
//   'COMC002',
//   'COMC003',
//   'COMC004',
//   'COMC005',
//   'COMC006',
//   'COMC007',
//   'COMC008',
//   'BUSS001',
//   'BUSS002',
//   'BUSS003',
//   'BUSS004',
//   'BUSC001',
//   'BUSC002',
//   'BUSC003',
//   'BUSP001',
//   'BUSP002',
//   'BUSP003',
//   'BUSP006',
//   'BUSP008',
//   'BUSP009',
//   'BUSP010',
//   'FINC001',
//   'FINP001',
//   'FINP002',
//   'MACS001',
//   'MACP003',
//   'MACP005',
//   'MACP010',
//   'MASP001',
//   'SHAS001',
//   'SHAS002',
//   'SHAC004',
//   'SHAC005',
//   'SHAC007',
//   'SHAC008',
//   'SHAC009',
//   'SHAC010',
//   'SHAC011',
//   'SHAC012',
//   'SHAP001',
//   'SHAP004',
//   'SHAP006',
//   'SHAP007',
//   'ANTR001',
//   'AIRR001',
//   'AIRR003',
//   'AIRR009',
//   'GHGR001',
//   'WAPR001',
//   'WAER001',
//   'COSR003',
//   'BOCR012',
//   'BOIR015',
//   'BOIR016',
//   'BOSR006',
//   'MACR011',
//   'MACR012',
//   'MACR022',
//   'MASR006',
//   'AUDR003',
//   'BODR002',
//   'BOIR002',
//   'BOIR004',
//   'BOIR006',
//   'BOIR008',
//   'BOIR012',
//   'BOSR003',
//   'BOSR005',
//   'BOSR008',
//   'COMR003',
//   'COMR006',
//   'MASR002',
//   'MASR005',
//   'FINR003',
//   ]



// export const  RegisterApi=(inputValues, navigate)=> {
//   console.log('call');
//   // return  (dispatch) => {
//     APIService(
//       "POST",
//       "/register",
//       inputValues
//     )
//       .then((res) => {
//         console.log("sched",res)
//         if (res.status === 200) {
//           toast.success(res?.data?.message);
//         navigate("/login");        
//         }
//       })
//       .catch((err) => {
//         toast.error(err?.response?.data?.message);
//       });
//   //  };
// }

export const loginApi = (values, navigate) => {
  return (dispatch) => {
    axios
      .post(base_Url + "/login", values)
      .then((res) => {
        if (res.status === 200) {
          dispatch(LoginAction(res.data))
          sessionStorage.setItem("userInfo", JSON.stringify(res?.data?.data));
          sessionStorage.setItem("role", (res?.data?.data?.role));
          sessionStorage.setItem("userToken", res?.data?.token);
          toast.success(res?.data?.message);
        }
        if (res.data.data.role === 'admin') {
          dispatch(getAnalyticsAPI)
          navigate("/admindashbord", { state: { role: '/admindashbord' } });
        } else if (res.data.data.role === 'user') {
          navigate("/dashbord", { state: { role: '/dashbord' } });
        } else {
          navigate("/manager", { state: { role: '/manager' } });
        }
      })
      .catch((err) => {
        toast.error(err?.response?.data?.message);
      });
  }
};
